# ğŸŒ¾ åŸå§‹å¹³åŸæ¨¡æ‹Ÿ | Plains Simulation

<div align="center">

**ä¸€ä¸ªåŸºäºAIé©±åŠ¨çš„2Dåƒç´ é£æ ¼NPCç”Ÿå­˜æ¨¡æ‹Ÿæ¸¸æˆ**

[![Python](https://img.shields.io/badge/Python-3.11+-blue.svg)](https://www.python.org/)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.104+-green.svg)](https://fastapi.tiangolo.com/)
[![React](https://img.shields.io/badge/React-18.2+-blue.svg)](https://reactjs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.2+-blue.svg)](https://www.typescriptlang.org/)
[![PixiJS](https://img.shields.io/badge/PixiJS-7.3+-red.svg)](https://pixijs.com/)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

</div>

---

## ğŸ“– é¡¹ç›®ç®€ä»‹

åŸå§‹å¹³åŸæ¨¡æ‹Ÿæ˜¯ä¸€ä¸ªåˆ›æ–°çš„AIé©±åŠ¨ç”Ÿå­˜æ¨¡æ‹Ÿæ¸¸æˆï¼ŒNPCä½¿ç”¨å¤§è¯­è¨€æ¨¡å‹ï¼ˆDeepSeekï¼‰è¿›è¡Œå®Œå…¨è‡ªä¸»çš„å†³ç­–ã€‚æ¸¸æˆæ¨¡æ‹Ÿäº†ä¸€ç¾¤åŸå§‹äººåœ¨è’é‡ä¸­çš„ç”Ÿå­˜è¿‡ç¨‹ï¼Œä»–ä»¬ä¼šè‡ªä¸»é‡‡é›†èµ„æºã€å»ºé€ æˆ¿å±‹ã€åˆ¶ä½œå·¥å…·ã€ç‹©çŒé‡å…½ã€ç¤¾äº¤äº’åŠ¨ï¼Œç”šè‡³å½¢æˆå¤æ‚çš„ç¤¾ä¼šå…³ç³»ã€‚

ã€ä½œè€…æ³¨ï¼šä»¥ä¸‹å†…å®¹éƒ½æ˜¯AIå†™çš„ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“å®ƒåœ¨è¯´ä»€ä¹ˆï¼Œæœ€ç®€å•çš„å¯åŠ¨æ–¹å¼ï¼šä¸‹è½½ä¸€é”®å¯åŠ¨åŒ…ï¼Œç›´æ¥æ‰§è¡Œä¸€é”®å¯åŠ¨.batè„šæœ¬å³å¯ã€‚ã€‘  
ã€ä¸€é”®å¯åŠ¨åŒ…å·²å†…ç½®pythonå’Œnodejsç¯å¢ƒï¼Œæ— éœ€é¢å¤–é…ç½®ã€‘  

## æ–‡ä»¶ç›®å½•ç»“æ„ï¼š
runtime æ”¾ç½®pythonç¯å¢ƒï¼Œä¹Ÿå¯ä»¥ç›´æ¥æ‰§è¡Œpythonè„šæœ¬  
node æ”¾ç½®nodejsçš„ç‹¬ç«‹è¿è¡ŒåŒ…ï¼Œå¯åœ¨å®˜ç½‘ä¸‹è½½  
[![image](å±å¹•æˆªå›¾ 2025-10-21 204047.png)]
### âœ¨ æ ¸å¿ƒç‰¹ç‚¹

- ğŸ¤– **AIé©±åŠ¨å†³ç­–**ï¼šæ¯ä¸ªNPCä½¿ç”¨å¤§è¯­è¨€æ¨¡å‹è¿›è¡Œç‹¬ç«‹æ€è€ƒå’Œå†³ç­–
- ğŸ­ **ç‹¬ç‰¹æ€§æ ¼ç³»ç»Ÿ**ï¼šæ¯ä¸ªNPCæ‹¥æœ‰ç‹¬ç‰¹çš„æ€§æ ¼ç‰¹è´¨ï¼ˆå‹‡æ•¢ã€ç¤¾äº¤ã€è°¨æ…ç­‰ï¼‰
- ğŸ§  **è®°å¿†ä¸å­¦ä¹ **ï¼šNPCä¼šè®°ä½å‘ç”Ÿçš„äº‹ä»¶ï¼Œå¹¶åŸºäºè®°å¿†åšå‡ºå†³ç­–
- ğŸ—ï¸ **å»ºé€ ç³»ç»Ÿ**ï¼šä»ç¯ç«åˆ°æœ¨å±‹ï¼Œé€æ­¥å»ºç«‹èšå±…åœ°
- ğŸ”¨ **åˆ¶ä½œç³»ç»Ÿ**ï¼šåˆ¶ä½œå·¥å…·ã€æ­¦å™¨æ¥æé«˜ç”Ÿå­˜æ•ˆç‡
- ğŸŒ **åŠ¨æ€ä¸–ç•Œ**ï¼šå®æ—¶å¤©æ°”ã€æ˜¼å¤œå¾ªç¯ã€èµ„æºå†ç”Ÿ
- ğŸ’¬ **ç¤¾äº¤äº’åŠ¨**ï¼šNPCä¹‹é—´ä¼šäº¤æµã€åˆä½œã€å»ºç«‹å…³ç³»
- ğŸ® **ä¸Šå¸æ¨¡å¼**ï¼šç©å®¶å¯ä»¥å¹²é¢„ä¸–ç•Œï¼Œå½±å“NPCè®°å¿†å’Œè¡Œä¸º
- ğŸ“Š **å®æ—¶å¯è§†åŒ–**ï¼šåŸºäºPixiJSçš„2Dæ¸²æŸ“ï¼Œæµç•…çš„åŠ¨ç”»æ•ˆæœ

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯
| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| **Python** | 3.11+ | ä¸»è¦ç¼–ç¨‹è¯­è¨€ |
| **FastAPI** | 0.104.1 | Webæ¡†æ¶ï¼Œæä¾›RESTful API |
| **Python-SocketIO** | 5.10.0 | WebSocketå®æ—¶é€šä¿¡ |
| **OpenAI SDK** | 1.3.5 | AIå†³ç­–ï¼ˆDeepSeek APIï¼‰ |
| **Pydantic** | 2.5.0 | æ•°æ®éªŒè¯å’Œæ¨¡å‹ |
| **Uvicorn** | 0.24.0 | ASGIæœåŠ¡å™¨ |
| **Redis** | 5.0.1 | ï¼ˆå¯é€‰ï¼‰ç¼“å­˜å’ŒæŒä¹…åŒ– |

### å‰ç«¯
| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| **React** | 18.2.0 | UIæ¡†æ¶ |
| **TypeScript** | 5.2.2 | ç±»å‹å®‰å…¨ |
| **PixiJS** | 7.3.2 | 2D WebGLæ¸²æŸ“å¼•æ“ |
| **Zustand** | 4.4.7 | è½»é‡çº§çŠ¶æ€ç®¡ç† |
| **Socket.IO Client** | 4.6.1 | WebSocketå®¢æˆ·ç«¯ |
| **Ant Design** | 5.12.2 | UIç»„ä»¶åº“ |
| **Vite** | 5.0.8 | æ„å»ºå·¥å…· |
| **Axios** | 1.6.2 | HTTPå®¢æˆ·ç«¯ |

---

## ğŸ® æ ¸å¿ƒåŠŸèƒ½

### 1. NPC AIå†³ç­–ç³»ç»Ÿ
- æ¯ä¸ªNPCæ‹¥æœ‰ç‹¬ç«‹çš„AIå†³ç­–èƒ½åŠ›
- åŸºäºå½“å‰çŠ¶æ€ï¼ˆå¥åº·ã€é¥¥é¥¿ã€ä½“åŠ›ï¼‰å’Œå‘¨å›´ç¯å¢ƒåšå‡ºå†³ç­–
- è€ƒè™‘è‡ªèº«æ€§æ ¼ç‰¹è´¨å’ŒæŠ€èƒ½æ°´å¹³
- è®°ä½è¿‡å»çš„ç»éªŒï¼Œé¿å…é‡å¤é”™è¯¯

### 2. ç”Ÿå­˜éœ€æ±‚ç®¡ç†
- **å¥åº·å€¼**ï¼šå—ä¼¤ã€é¥¥é¥¿ä¼šé™ä½ï¼Œä¼‘æ¯å’Œè¿›é£Ÿæ¢å¤
- **é¥¥é¥¿å€¼**ï¼šéšæ—¶é—´å¢åŠ ï¼Œéœ€è¦è¿›é£Ÿæµ†æœæˆ–è‚‰ç±»
- **ä½“åŠ›å€¼**ï¼šè¡ŒåŠ¨æ¶ˆè€—ï¼Œä¼‘æ¯æ¢å¤
- **ä½“æ¸©**ï¼šå—å¤©æ°”å’Œå»ºç­‘å½±å“

### 3. èµ„æºç³»ç»Ÿ
- **æœ¨æ**ï¼šç ä¼æ ‘æœ¨è·å¾—ï¼Œç”¨äºå»ºé€ å’Œåˆ¶ä½œ
- **çŸ³å¤´**ï¼šé‡‡é›†çŸ³å¤´èŠ‚ç‚¹ï¼Œç”¨äºå·¥å…·å’Œå»ºç­‘
- **æµ†æœ**ï¼šé‡‡é›†æµ†æœä¸›ï¼Œç”¨äºé£Ÿç‰©
- **æ°´æº**ï¼šåœ¨æ°´æºå¤„è·å–ï¼Œç»´æŒç”Ÿå­˜
- **è‚‰ç±»**ï¼šç‹©çŒé‡å…½è·å¾—ï¼Œé«˜æ•ˆé£Ÿç‰©æ¥æº

### 4. å»ºç­‘ç³»ç»Ÿ
| å»ºç­‘ | éœ€æ±‚ | åŠŸèƒ½ |
|------|------|------|
| ç¯ç« | 5æœ¨æ | æä¾›å…‰æºå’Œæ¸©æš–ï¼Œå¯çƒ¹é¥ªé£Ÿç‰© |
| ç®€æ˜“æ£šå±‹ | 10æœ¨æ + 5çŸ³å¤´ | åŸºç¡€åº‡æŠ¤æ‰€ï¼ŒåŠ é€Ÿæ¢å¤ |
| æœ¨å±‹ | 30æœ¨æ + 15çŸ³å¤´ | é«˜çº§ä½æ‰€ï¼Œå¤§å¹…æ¢å¤çŠ¶æ€ |
| å‚¨ç‰©æ£š | 20æœ¨æ | å­˜å‚¨èµ„æºï¼Œå›¢é˜Ÿå…±äº« |
| å·¥ä½œå° | 15æœ¨æ + 10çŸ³å¤´ | è§£é”é«˜çº§åˆ¶ä½œé…æ–¹ |

### 5. åˆ¶ä½œç³»ç»Ÿ
| ç‰©å“ | ææ–™ | æ•ˆæœ |
|------|------|------|
| çŸ³æ–§ | 3çŸ³å¤´ + 2æœ¨æ | é‡‡é›†æœ¨ææ•ˆç‡+50% |
| çŸ³é• | 4çŸ³å¤´ + 2æœ¨æ | é‡‡é›†çŸ³å¤´æ•ˆç‡+50% |
| é•¿çŸ› | 2çŸ³å¤´ + 3æœ¨æ | æˆ˜æ–—ä¼¤å®³+30% |
| ç¯®å­ | 5æœ¨æ | é‡‡é›†æµ†æœæ•ˆç‡+30% |
| æ°´å®¹å™¨ | 3æœ¨æ | å‚¨å­˜æ›´å¤šæ°´ |

### 6. æŠ€èƒ½ç³»ç»Ÿ
NPCé€šè¿‡æ‰§è¡Œè¡ŒåŠ¨æå‡ç›¸å…³æŠ€èƒ½ï¼ˆ0-100çº§ï¼‰ï¼š
- **ä¼æœ¨** (Woodcutting)
- **é‡‡çŸ¿** (Mining)
- **è§…é£Ÿ** (Foraging)
- **æˆ˜æ–—** (Combat)
- **å»ºé€ ** (Construction)
- **åˆ¶ä½œ** (Crafting)
- **ç¤¾äº¤** (Social)
- **ç”Ÿå­˜** (Survival)

### 7. æ€§æ ¼ç³»ç»Ÿ
æ¯ä¸ªNPCæ‹¥æœ‰6ä¸ªæ€§æ ¼ç‰¹è´¨ï¼ˆ0-100ï¼‰ï¼Œå½±å“å†³ç­–ï¼š
- **å‹‡æ•¢åº¦** - å½±å“æˆ˜æ–—å’Œæ¢ç´¢æ„æ„¿
- **ç¤¾äº¤æ€§** - å½±å“ä¸ä»–äººäº¤æµé¢‘ç‡
- **è°¨æ…åº¦** - å½±å“é£é™©è¯„ä¼°
- **å¥½å¥‡å¿ƒ** - å½±å“æ¢ç´¢æ–°åŒºåŸŸæ„æ„¿
- **åˆä½œæ€§** - å½±å“å›¢é˜Ÿåä½œæ„æ„¿
- **è¿›å–å¿ƒ** - å½±å“å­¦ä¹ å’Œæå‡åŠ¨åŠ›

### 8. ç¤¾äº¤ç³»ç»Ÿ
- NPCä¹‹é—´å¯ä»¥äº¤æµå¯¹è¯
- å…±åŒæ‰§è¡Œéœ€è¦åˆä½œçš„å»ºç­‘ä»»åŠ¡
- å»ºç«‹å…³ç³»ç½‘ç»œï¼ˆå¥½æ„Ÿåº¦ -100 åˆ° +100ï¼‰
- åˆ†äº«èµ„æºå’Œå·¥å…·

### 9. ä¸Šå¸æŒ‡ä»¤ç³»ç»Ÿ
ç©å®¶ä½œä¸º"ä¸Šå¸"å¯ä»¥ï¼š
- ä¸ºNPCæ·»åŠ è®°å¿†
- ä¿®æ”¹NPCçš„ç‰¹å®šè®°å¿†
- æ¸…é™¤NPCçš„è®°å¿†
- å½±å“æ¸¸æˆè¿›ç¨‹

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ğŸ’ æ–¹æ³•ä¸€ï¼šæ‡’äººåŒ…å¯åŠ¨ï¼ˆå¼ºçƒˆæ¨èï¼ï¼‰

**é›¶å®‰è£…ï¼Œå¼€ç®±å³ç”¨ï¼** æ— éœ€å®‰è£…Pythonå’ŒNode.jsï¼

#### Windows
```bash
# åŒå‡»è¿è¡Œ
ä¸€é”®å¯åŠ¨.bat
```

**ç‰¹ç‚¹**ï¼š
- âœ… **å®Œå…¨ç‹¬ç«‹** - è‡ªå¸¦Pythonå’ŒNode.jsç¯å¢ƒ
- âœ… **é›¶é…ç½®** - è§£å‹å³ç”¨ï¼Œæ— éœ€ä»»ä½•å®‰è£…
- âœ… **é€‚åˆåˆ†äº«** - å¯ä»¥ç›´æ¥æ‰“åŒ…å‘ç»™æœ‹å‹

**å†…ç½®ç¯å¢ƒ**ï¼š
- Python 3.11ï¼ˆ`runtime/` ç›®å½•ï¼‰
- Node.js 18+ï¼ˆ`node/` ç›®å½•ï¼‰
- æ‰€æœ‰ä¾èµ–å·²é¢„è£…

> ğŸ’¡ **é¦–æ¬¡è¿è¡Œ**éœ€è¦å®‰è£…å‰ç«¯ä¾èµ–ï¼ˆçº¦2-5åˆ†é’Ÿï¼‰ï¼Œä¹‹åå¯åŠ¨åªéœ€å‡ ç§’ï¼
>
> ğŸ“– è¯¦ç»†è¯´æ˜è¯·æŸ¥çœ‹ï¼š[PORTABLE_GUIDE.md](PORTABLE_GUIDE.md)

---

### ğŸ› ï¸ æ–¹æ³•äºŒï¼šå¼€å‘è€…æ¨¡å¼

**é€‚åˆæœ‰Pythonå’ŒNode.jsç¯å¢ƒçš„å¼€å‘è€…**

#### å‰ç½®è¦æ±‚
- **Python 3.11+**
- **Node.js 18+**
- **DeepSeek API Key**ï¼ˆæˆ–å…¶ä»–OpenAIå…¼å®¹çš„APIï¼‰

#### Windows
```bash
# ä½¿ç”¨ç³»ç»Ÿç¯å¢ƒ
start_game.bat
```

#### Linux/Mac
```bash
chmod +x start_game.sh
./start_game.sh
```

---

### ğŸ”§ æ–¹æ³•ä¸‰ï¼šæ‰‹åŠ¨å¯åŠ¨ï¼ˆå®Œå…¨æ§åˆ¶ï¼‰

#### 1. é…ç½®ç¯å¢ƒå˜é‡

åœ¨ `backend/` ç›®å½•åˆ›å»º `.env` æ–‡ä»¶ï¼š

```bash
DEEPSEEK_API_KEY=your_api_key_here
DEEPSEEK_BASE_URL=https://api.deepseek.com
PORT=8000
```

#### 2. å¯åŠ¨åç«¯

```bash
# è¿›å…¥åç«¯ç›®å½•
cd backend

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆé¦–æ¬¡è¿è¡Œï¼‰
python -m venv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
# Windows
venv\Scripts\activate
# Linux/Mac
source venv/bin/activate

# å®‰è£…ä¾èµ–ï¼ˆé¦–æ¬¡è¿è¡Œï¼‰
pip install -r requirements.txt

# å¯åŠ¨æœåŠ¡å™¨
python run.py
```

åç«¯å¯åŠ¨æˆåŠŸåï¼Œè®¿é—®ï¼š
- APIæ–‡æ¡£ï¼šhttp://localhost:8000/docs
- å¥åº·æ£€æŸ¥ï¼šhttp://localhost:8000/api/health

#### 3. å¯åŠ¨å‰ç«¯

**æ–°å¼€ä¸€ä¸ªç»ˆç«¯çª—å£**ï¼š

```bash
# è¿›å…¥å‰ç«¯ç›®å½•
cd frontend

# å®‰è£…ä¾èµ–ï¼ˆé¦–æ¬¡è¿è¡Œï¼‰
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

å‰ç«¯å¯åŠ¨æˆåŠŸåï¼Œè®¿é—®ï¼šhttp://localhost:5173

### ğŸ¯ å¼€å§‹æ¸¸æˆ

1. æ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:5173
2. ç­‰å¾…5ä¸ªNPCåœ¨å¹³åŸä¸­å¿ƒå‡ºç”Ÿ
3. è§‚å¯ŸNPCè‡ªä¸»è¡ŒåŠ¨ã€é‡‡é›†ã€å»ºé€ 
4. ç‚¹å‡»NPCæŸ¥çœ‹è¯¦ç»†ä¿¡æ¯å’ŒAIæ€è€ƒè¿‡ç¨‹
5. ä½¿ç”¨å³ä¸‹è§’çš„ä¸Šå¸æ§åˆ¶å°å¹²é¢„ä¸–ç•Œ

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
æ¨¡æ‹Ÿåƒç´ /
â”œâ”€â”€ backend/                    # Pythonåç«¯
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ models/            # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ npc.py        # NPCæ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ world.py      # ä¸–ç•ŒçŠ¶æ€
â”‚   â”‚   â”‚   â”œâ”€â”€ actions.py    # è¡ŒåŠ¨ç±»å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ buildings.py  # å»ºç­‘ç³»ç»Ÿ
â”‚   â”‚   â”‚   â”œâ”€â”€ crafting.py   # åˆ¶ä½œç³»ç»Ÿ
â”‚   â”‚   â”‚   â”œâ”€â”€ resources.py  # èµ„æºèŠ‚ç‚¹
â”‚   â”‚   â”‚   â”œâ”€â”€ beasts.py     # é‡å…½ç³»ç»Ÿ
â”‚   â”‚   â”‚   â””â”€â”€ conversation.py # å¯¹è¯ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ services/          # æ ¸å¿ƒæœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ ai_service.py        # AIå†³ç­–æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ game_loop.py         # æ¸¸æˆä¸»å¾ªç¯
â”‚   â”‚   â”‚   â”œâ”€â”€ world_generator.py   # ä¸–ç•Œç”Ÿæˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ memory_service.py    # è®°å¿†ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ physics_engine.py    # ç‰©ç†å¼•æ“
â”‚   â”‚   â”œâ”€â”€ prompts/           # AIæç¤ºè¯
â”‚   â”‚   â”‚   â””â”€â”€ npc_decision_prompt.py
â”‚   â”‚   â””â”€â”€ main.py           # FastAPIåº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ requirements.txt       # Pythonä¾èµ–
â”‚   â”œâ”€â”€ run.py                # å¯åŠ¨è„šæœ¬
â”‚   â””â”€â”€ .env                  # ç¯å¢ƒå˜é‡
â”œâ”€â”€ frontend/                  # Reactå‰ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/       # Reactç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ GameCanvas.tsx      # æ¸¸æˆç”»å¸ƒï¼ˆPixiJSï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ EventTimeline.tsx   # äº‹ä»¶æ—¶é—´çº¿
â”‚   â”‚   â”‚   â”œâ”€â”€ NPCPanel.tsx        # NPCä¿¡æ¯é¢æ¿
â”‚   â”‚   â”‚   â”œâ”€â”€ TopBar.tsx          # é¡¶éƒ¨çŠ¶æ€æ 
â”‚   â”‚   â”‚   â”œâ”€â”€ ObjectInfoPanel.tsx # å¯¹è±¡ä¿¡æ¯é¢æ¿
â”‚   â”‚   â”‚   â””â”€â”€ GodConsole.tsx      # ä¸Šå¸æ§åˆ¶å°
â”‚   â”‚   â”œâ”€â”€ store/
â”‚   â”‚   â”‚   â””â”€â”€ gameStore.ts        # ZustandçŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â””â”€â”€ socketService.ts    # WebSocketæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”‚   â””â”€â”€ index.ts           # TypeScriptç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ App.tsx           # æ ¹ç»„ä»¶
â”‚   â”‚   â””â”€â”€ main.tsx          # å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ package.json          # Nodeä¾èµ–
â”‚   â””â”€â”€ vite.config.ts        # Viteé…ç½®
â”œâ”€â”€ logs/                     # æ—¥å¿—ç›®å½•
â”‚   â””â”€â”€ npc_decisions/       # NPCå†³ç­–æ—¥å¿—
â”œâ”€â”€ start_game.bat           # Windowså¯åŠ¨è„šæœ¬
â”œâ”€â”€ start_game.sh            # Linux/Macå¯åŠ¨è„šæœ¬
â”œâ”€â”€ START.md                 # å¯åŠ¨æŒ‡å—
â””â”€â”€ README.md                # æœ¬æ–‡ä»¶
```

---

## ğŸ”Œ APIæ–‡æ¡£

### REST API

#### åŸºç¡€ç«¯ç‚¹
- `GET /` - æ ¹ç«¯ç‚¹ï¼Œè¿”å›APIä¿¡æ¯
- `GET /api/health` - å¥åº·æ£€æŸ¥
- `GET /api/world` - è·å–å®Œæ•´ä¸–ç•ŒçŠ¶æ€
- `GET /api/npcs` - è·å–æ‰€æœ‰NPCåˆ—è¡¨
- `GET /api/npcs/{npc_id}` - è·å–ç‰¹å®šNPCè¯¦æƒ…å’Œè®°å¿†
- `GET /api/resources` - è·å–æ‰€æœ‰èµ„æºèŠ‚ç‚¹
- `GET /api/buildings` - è·å–æ‰€æœ‰å»ºç­‘
- `GET /api/events` - è·å–æœ€è¿‘50ä¸ªæ¸¸æˆäº‹ä»¶

### WebSocketäº‹ä»¶

#### å®¢æˆ·ç«¯ç›‘å¬ï¼ˆä»æœåŠ¡å™¨æ¥æ”¶ï¼‰

```typescript
// å®Œæ•´ä¸–ç•ŒçŠ¶æ€ï¼ˆè¿æ¥æ—¶å‘é€ï¼‰
socket.on('world_state', (data: WorldState) => {})

// ä¸–ç•Œå¢é‡æ›´æ–°ï¼ˆæ¯å¸§å‘é€ï¼‰
socket.on('world_update', (data: Partial<WorldState>) => {})

// NPCè¡ŒåŠ¨äº‹ä»¶
socket.on('npc_action', (data: {
  npc_id: string,
  action: string,
  description: string
}) => {})

// æ¸¸æˆäº‹ä»¶
socket.on('game_event', (data: GameEvent) => {})

// ä¸Šå¸æŒ‡ä»¤æ‰§è¡Œç»“æœ
socket.on('god_command_result', (data: {
  success: boolean,
  message: string
}) => {})
```

#### å®¢æˆ·ç«¯å‘é€ï¼ˆåˆ°æœåŠ¡å™¨ï¼‰

```typescript
// å®¢æˆ·ç«¯å‡†å¤‡å°±ç»ª
socket.emit('client_ready')

// è¯·æ±‚ä¸–ç•ŒçŠ¶æ€
socket.emit('request_world_state')

// ä¸Šå¸æŒ‡ä»¤ï¼šæ·»åŠ è®°å¿†
socket.emit('god_add_memory', {
  target: 'all' | npc_id,
  memory: string
})

// ä¸Šå¸æŒ‡ä»¤ï¼šä¿®æ”¹è®°å¿†
socket.emit('god_modify_memory', {
  npc: npc_id,
  index: number,
  new_memory: string
})

// ä¸Šå¸æŒ‡ä»¤ï¼šæ¸…é™¤è®°å¿†
socket.emit('god_clear_memories', {
  target: 'all' | npc_id
})
```

---

## ğŸ§‘â€ğŸ’» å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„NPCè¡ŒåŠ¨ç±»å‹

1. **å®šä¹‰è¡ŒåŠ¨ç±»å‹**

åœ¨ `backend/app/models/actions.py` æ·»åŠ æ–°è¡ŒåŠ¨ï¼š

```python
class ActionType:
    # ... ç°æœ‰è¡ŒåŠ¨
    MY_NEW_ACTION = "my_new_action"
```

2. **æ›´æ–°æç¤ºè¯**

åœ¨ `backend/app/prompts/npc_decision_prompt.py` æ·»åŠ åˆ°å¯ç”¨è¡ŒåŠ¨åˆ—è¡¨ï¼š

```python
available_actions.append({
    "action": "my_new_action",
    "description": "æè¿°è¿™ä¸ªè¡ŒåŠ¨",
    "when_to_use": "ä»€ä¹ˆæ—¶å€™ä½¿ç”¨"
})
```

3. **å®ç°è¡ŒåŠ¨é€»è¾‘**

åœ¨ `backend/app/services/game_loop.py` çš„ `execute_action()` æ–¹æ³•ä¸­æ·»åŠ å¤„ç†ï¼š

```python
async def execute_action(self, npc: NPC2D, action: NPCAction):
    # ... ç°æœ‰ä»£ç 
    elif action.action == ActionType.MY_NEW_ACTION:
        # å®ç°ä½ çš„è¡ŒåŠ¨é€»è¾‘
        self.log_event(f"{npc.name}æ‰§è¡Œäº†æ–°è¡ŒåŠ¨", importance="low")
```

### æ·»åŠ æ–°çš„å»ºç­‘ç±»å‹

åœ¨ `backend/app/models/buildings.py` æ·»åŠ ï¼š

```python
class BuildingType:
    MY_BUILDING = {
        "id": "my_building",
        "name": "æˆ‘çš„å»ºç­‘",
        "description": "å»ºç­‘æè¿°",
        "requirements": {"wood": 10, "stone": 5},
        "build_time": 120.0,
        "size": {"x": 2, "y": 2},
        "sprite": "my_building",
        "requires_cooperation": False
    }
```

### æ·»åŠ æ–°çš„åˆ¶ä½œé…æ–¹

åœ¨ `backend/app/models/crafting.py` æ·»åŠ ï¼š

```python
CRAFTING_RECIPES = {
    # ... ç°æœ‰é…æ–¹
    "my_item": CraftingRecipe(
        item_name="my_item",
        required_materials={"wood": 5, "stone": 3},
        crafting_time=20.0,
        skill_required="crafting",
        skill_level=10,
        tool_type="tool",
        durability=100,
        description="æˆ‘çš„ç‰©å“æè¿°"
    )
}
```

### ä¿®æ”¹AIæ¨¡å‹å‚æ•°

åœ¨ `backend/app/services/ai_service.py` è°ƒæ•´ï¼š

```python
response = self.client.chat.completions.create(
    model="deepseek-chat",  # æ›´æ”¹æ¨¡å‹
    temperature=0.8,         # è°ƒæ•´åˆ›é€ æ€§ (0.0-1.0)
    max_tokens=500          # æœ€å¤§å“åº”é•¿åº¦
)
```

### è‡ªå®šä¹‰å‰ç«¯ç»„ä»¶

1. åœ¨ `frontend/src/components/` åˆ›å»ºæ–°ç»„ä»¶
2. ä½¿ç”¨ `useGameStore()` è®¿é—®å…¨å±€çŠ¶æ€
3. åœ¨ `App.tsx` ä¸­å¼•å…¥å¹¶ä½¿ç”¨

```tsx
import { useGameStore } from '../store/gameStore'

export function MyComponent() {
  const { npcs, world } = useGameStore()
  
  return (
    <div>
      {/* ä½ çš„ç»„ä»¶å†…å®¹ */}
    </div>
  )
}
```

---

## ğŸ› è°ƒè¯•ä¸æ—¥å¿—

### åç«¯æ—¥å¿—

- **æ§åˆ¶å°æ—¥å¿—**ï¼šç›´æ¥åœ¨è¿è¡Œåç«¯çš„ç»ˆç«¯æŸ¥çœ‹
- **NPCå†³ç­–æ—¥å¿—**ï¼š`backend/logs/npc_decisions/` ç›®å½•ä¸‹ï¼Œæ¯ä¸ªNPCä¸€ä¸ªæ–‡ä»¶

### å‰ç«¯æ—¥å¿—

- æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰
- æŸ¥çœ‹Consoleæ ‡ç­¾é¡µ
- WebSocketæ¶ˆæ¯åœ¨Networkæ ‡ç­¾çš„WSç­›é€‰å™¨ä¸­

### å¸¸è§é—®é¢˜æ’æŸ¥

#### NPCä¸åŠ¨/æ— å“åº”
1. æ£€æŸ¥åç«¯æ˜¯å¦æ­£å¸¸è¿è¡Œ
2. æŸ¥çœ‹æµè§ˆå™¨Consoleæ˜¯å¦æœ‰WebSocketè¿æ¥é”™è¯¯
3. æ£€æŸ¥DeepSeek APIå¯†é’¥æ˜¯å¦æœ‰æ•ˆ
4. æŸ¥çœ‹åç«¯æ—¥å¿—æ˜¯å¦æœ‰AIè°ƒç”¨å¤±è´¥

#### å‰ç«¯æ˜¾ç¤º"æœªè¿æ¥"
1. ç¡®ä¿åç«¯åœ¨ http://localhost:8000 è¿è¡Œ
2. æ£€æŸ¥CORSé…ç½®
3. åˆ·æ–°é¡µé¢é‡æ–°è¿æ¥

#### AIå†³ç­–å¾ˆæ…¢
- è¿™æ˜¯æ­£å¸¸çš„ï¼ŒAIè°ƒç”¨éœ€è¦æ—¶é—´ï¼ˆé€šå¸¸2-5ç§’ï¼‰
- å¯ä»¥é™ä½NPCæ•°é‡æˆ–å¢åŠ å†³ç­–å†·å´æ—¶é—´

---

## ğŸ¨ è‡ªå®šä¹‰ä¸æ‰©å±•

### ä¿®æ”¹æ¸¸æˆå‚æ•°

åœ¨ `backend/app/main.py` çš„ `startup_event()` ä¸­ï¼š

```python
config = GameConfig(
    map_width=100,           # åœ°å›¾å®½åº¦
    map_height=100,          # åœ°å›¾é«˜åº¦
    initial_npc_count=5,     # åˆå§‹NPCæ•°é‡
    time_scale=60.0          # æ—¶é—´ç¼©æ”¾ï¼ˆ1æ¸¸æˆåˆ†é’Ÿ=60å®æ—¶ç§’ï¼‰
)
```

### è°ƒæ•´èµ„æºç”Ÿæˆ

åœ¨ `backend/app/services/world_generator.py` ä¸­ä¿®æ”¹èµ„æºå¯†åº¦å’Œåˆ†å¸ƒã€‚

### æ›´æ¢AIæä¾›å•†

æ”¯æŒä»»ä½•OpenAIå…¼å®¹çš„APIï¼š

```python
# .env æ–‡ä»¶
DEEPSEEK_API_KEY=your_api_key
DEEPSEEK_BASE_URL=https://api.your-provider.com
```

æ”¯æŒçš„æä¾›å•†ï¼š
- DeepSeek
- OpenAI
- Azure OpenAI
- æœ¬åœ°éƒ¨ç½²çš„æ¨¡å‹ï¼ˆå¦‚LLaMAã€Qwenç­‰ï¼‰

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼

### å¦‚ä½•è´¡çŒ®

1. **Fork** æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ **Pull Request**

### è´¡çŒ®æ–¹å‘

- ğŸ†• æ–°åŠŸèƒ½ï¼šæ–°çš„NPCè¡ŒåŠ¨ã€å»ºç­‘ã€ç‰©å“
- ğŸ¨ UIä¼˜åŒ–ï¼šæ”¹è¿›å‰ç«¯ç•Œé¢å’Œäº¤äº’
- ğŸ› Bugä¿®å¤ï¼šä¿®å¤å·²çŸ¥é—®é¢˜
- ğŸ“ æ–‡æ¡£ï¼šæ”¹è¿›æ–‡æ¡£å’Œæ³¨é‡Š
- ğŸ§ª æµ‹è¯•ï¼šæ·»åŠ å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
- ğŸŒ å›½é™…åŒ–ï¼šæ·»åŠ å¤šè¯­è¨€æ”¯æŒ
- ğŸ® æ¸¸æˆå¹³è¡¡ï¼šè°ƒæ•´å‚æ•°ä½¿æ¸¸æˆæ›´æœ‰è¶£

### ä»£ç è§„èŒƒ

- **Python**ï¼šéµå¾ª PEP 8
- **TypeScript**ï¼šéµå¾ª ESLint é…ç½®
- **æäº¤ä¿¡æ¯**ï¼šä½¿ç”¨æ¸…æ™°çš„æè¿°æ€§æ¶ˆæ¯
- **æ–‡æ¡£**ï¼šä¸ºæ–°åŠŸèƒ½æ·»åŠ æ³¨é‡Šå’Œæ–‡æ¡£

---

## ğŸ“‹ å¾…åŠäº‹é¡¹ä¸è·¯çº¿å›¾

### å½“å‰ç‰ˆæœ¬ (v1.0)
- [x] åŸºç¡€NPC AIå†³ç­–ç³»ç»Ÿ
- [x] èµ„æºé‡‡é›†å’Œç®¡ç†
- [x] å»ºç­‘å»ºé€ ç³»ç»Ÿ
- [x] åˆ¶ä½œç³»ç»Ÿ
- [x] ç¤¾äº¤å’Œå¯¹è¯
- [x] æŠ€èƒ½å’Œæ€§æ ¼ç³»ç»Ÿ
- [x] ä¸Šå¸æŒ‡ä»¤ç³»ç»Ÿ
- [x] å®æ—¶å¯è§†åŒ–

### æœªæ¥è®¡åˆ’ (v1.1+)
- [ ] æŒä¹…åŒ–å­˜å‚¨ï¼ˆä¿å­˜/åŠ è½½æ¸¸æˆï¼‰
- [ ] æ›´å¤šå»ºç­‘ç±»å‹ï¼ˆå†œç”°ã€å›´å¢™ã€ç­æœ›å¡”ï¼‰
- [ ] å†œä¸šç³»ç»Ÿï¼ˆç§æ¤ã€æ”¶è·ï¼‰
- [ ] æ›´å¤æ‚çš„é‡å…½AI
- [ ] å¤©æ°”ç³»ç»Ÿå½±å“æ¸¸æˆç©æ³•
- [ ] ç–¾ç—…å’ŒåŒ»ç–—ç³»ç»Ÿ
- [ ] è´¸æ˜“ç³»ç»Ÿ
- [ ] å¤šä¸ªèšå±…åœ°å’Œéƒ¨è½
- [ ] åœ°å›¾ç¼–è¾‘å™¨
- [ ] ç§»åŠ¨ç«¯é€‚é…

---

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### å·²å®ç°çš„ä¼˜åŒ–
- PixiJS WebGLæ¸²æŸ“ï¼Œé«˜æ€§èƒ½2Då›¾å½¢
- WebSocketä»…ä¼ è¾“å¢é‡æ›´æ–°ï¼Œå‡å°‘å¸¦å®½
- Reactç»„ä»¶ä½¿ç”¨ `useMemo` å’Œ `useCallback` ä¼˜åŒ–
- AIå†³ç­–ç»“æœç¼“å­˜
- äº‹ä»¶æ—¥å¿—é™åˆ¶æ•°é‡ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼

### æ€§èƒ½æŒ‡æ ‡
- **å‰ç«¯FPS**ï¼š60 FPSï¼ˆPixiJSæ¸²æŸ“ï¼‰
- **WebSocketå»¶è¿Ÿ**ï¼š< 50ms
- **AIå†³ç­–æ—¶é—´**ï¼š2-5ç§’ï¼ˆå–å†³äºAPIå“åº”ï¼‰
- **æ”¯æŒNPCæ•°é‡**ï¼šæµ‹è¯•è¿‡20ä¸ªNPCåŒæ—¶è¿è¡Œ

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ **MIT License** å¼€æºã€‚

```
MIT License

Copyright (c) 2024 åŸå§‹å¹³åŸæ¨¡æ‹Ÿ

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
```

---

## ğŸ™ è‡´è°¢

- **[FastAPI](https://fastapi.tiangolo.com/)** - ä¼˜ç§€çš„Python Webæ¡†æ¶
- **[PixiJS](https://pixijs.com/)** - å¼ºå¤§çš„2Dæ¸²æŸ“å¼•æ“
- **[DeepSeek](https://www.deepseek.com/)** - æä¾›AIå†³ç­–èƒ½åŠ›
- **[React](https://reactjs.org/)** - å‰ç«¯UIæ¡†æ¶
- **[Zustand](https://github.com/pmndrs/zustand)** - è½»é‡çº§çŠ¶æ€ç®¡ç†

---

## ğŸ“§ è”ç³»æ–¹å¼

- **é—®é¢˜åé¦ˆ**ï¼šé€šè¿‡GitHub Issuesæäº¤
- **åŠŸèƒ½å»ºè®®**ï¼šé€šè¿‡GitHub Discussionsè®¨è®º
- **è´¡çŒ®ä»£ç **ï¼šé€šè¿‡Pull Requestæäº¤

---

## ğŸŒŸ æ”¯æŒé¡¹ç›®

å¦‚æœä½ è§‰å¾—è¿™ä¸ªé¡¹ç›®æœ‰è¶£ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ª â­ï¸ Starï¼

ä½ ä¹Ÿå¯ä»¥ï¼š
- åˆ†äº«ç»™æœ‹å‹
- æäº¤BugæŠ¥å‘Š
- è´¡çŒ®ä»£ç 
- æ”¹è¿›æ–‡æ¡£
- æä¾›åé¦ˆå’Œå»ºè®®

---

<div align="center">

**ç”¨AIåˆ›é€ ç”Ÿå‘½ï¼Œç”¨ä»£ç æ¨¡æ‹Ÿä¸–ç•Œ** ğŸŒâœ¨

Made with â¤ï¸ by the Plains Simulation Team

</div>

